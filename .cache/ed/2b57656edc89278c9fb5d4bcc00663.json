{"id":"../packages/reactivity/src/ref.js","dependencies":[{"name":"/Users/ahabhgk/Coding/FE/awesome-source-code/ts-vue3-core/package.json","includedInParent":true,"mtime":1600999541641},{"name":"./reactive.js","loc":{"line":1,"column":25},"parent":"/Users/ahabhgk/Coding/FE/awesome-source-code/ts-vue3-core/packages/reactivity/src/ref.js","resolved":"/Users/ahabhgk/Coding/FE/awesome-source-code/ts-vue3-core/packages/reactivity/src/reactive.js"},{"name":"./effect.js","loc":{"line":2,"column":31},"parent":"/Users/ahabhgk/Coding/FE/awesome-source-code/ts-vue3-core/packages/reactivity/src/ref.js","resolved":"/Users/ahabhgk/Coding/FE/awesome-source-code/ts-vue3-core/packages/reactivity/src/effect.js"},{"name":"./operations.js","loc":{"line":3,"column":45},"parent":"/Users/ahabhgk/Coding/FE/awesome-source-code/ts-vue3-core/packages/reactivity/src/ref.js","resolved":"/Users/ahabhgk/Coding/FE/awesome-source-code/ts-vue3-core/packages/reactivity/src/operations.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.customRef = customRef;\nexports.ref = ref;\nexports.RefFlags = void 0;\n\nvar _reactive = require(\"./reactive.js\");\n\nvar _effect = require(\"./effect.js\");\n\nvar _operations = require(\"./operations.js\");\n\nfunction _defineEnumerableProperties(obj, descs) { for (var key in descs) { var desc = descs[key]; desc.configurable = desc.enumerable = true; if (\"value\" in desc) desc.writable = true; Object.defineProperty(obj, key, desc); } if (Object.getOwnPropertySymbols) { var objectSymbols = Object.getOwnPropertySymbols(descs); for (var i = 0; i < objectSymbols.length; i++) { var sym = objectSymbols[i]; var desc = descs[sym]; desc.configurable = desc.enumerable = true; if (\"value\" in desc) desc.writable = true; Object.defineProperty(obj, sym, desc); } } return obj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar RefFlags = {\n  IS_REF: '__v_isRef'\n};\nexports.RefFlags = RefFlags;\n\nfunction customRef(factory) {\n  var _value, _value2, _ref, _mutatorMap;\n\n  var _factory = factory(function () {\n    return (0, _effect.track)(ref, _operations.TrackOpTypes.GET, 'value');\n  }, function () {\n    return (0, _effect.trigger)(ref, _operations.TriggerOpTypes.SET, 'value');\n  }),\n      get = _factory.get,\n      set = _factory.set;\n\n  var ref = (_ref = {}, _defineProperty(_ref, RefFlags.IS_REF, true), _value = \"value\", _mutatorMap = {}, _mutatorMap[_value] = _mutatorMap[_value] || {}, _mutatorMap[_value].get = function () {\n    return get();\n  }, _value2 = \"value\", _mutatorMap[_value2] = _mutatorMap[_value2] || {}, _mutatorMap[_value2].set = function (v) {\n    set(v);\n  }, _defineEnumerableProperties(_ref, _mutatorMap), _ref);\n  return ref;\n}\n\nfunction ref(value) {\n  return customRef(function (track, trigger) {\n    return {\n      get: function get() {\n        track();\n        return value;\n      },\n      set: function set(newValue) {\n        value = newValue;\n        trigger();\n      }\n    };\n  });\n}"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":10,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":1,"column":0}},{"generated":{"line":12,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":2,"column":0}},{"generated":{"line":14,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":3,"column":0}},{"generated":{"line":20,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":5,"column":7}},{"name":"RefFlags","generated":{"line":20,"column":4},"source":"../packages/reactivity/src/ref.js","original":{"line":5,"column":13}},{"generated":{"line":20,"column":12},"source":"../packages/reactivity/src/ref.js","original":{"line":5,"column":21}},{"generated":{"line":20,"column":15},"source":"../packages/reactivity/src/ref.js","original":{"line":5,"column":24}},{"name":"IS_REF","generated":{"line":21,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":6,"column":2}},{"name":"IS_REF","generated":{"line":21,"column":2},"source":"../packages/reactivity/src/ref.js","original":{"line":6,"column":2}},{"generated":{"line":21,"column":8},"source":"../packages/reactivity/src/ref.js","original":{"line":6,"column":8}},{"generated":{"line":21,"column":10},"source":"../packages/reactivity/src/ref.js","original":{"line":6,"column":10}},{"generated":{"line":22,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":5,"column":24}},{"generated":{"line":22,"column":1},"source":"../packages/reactivity/src/ref.js","original":{"line":5,"column":7}},{"generated":{"line":25,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":7}},{"name":"customRef","generated":{"line":25,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":16}},{"generated":{"line":25,"column":18},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":7}},{"name":"factory","generated":{"line":25,"column":19},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":26}},{"generated":{"line":25,"column":26},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":7}},{"generated":{"line":25,"column":28},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"generated":{"line":26,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"generated":{"line":28,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"name":"factory","generated":{"line":28,"column":17},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":23}},{"generated":{"line":28,"column":24},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":30}},{"generated":{"line":28,"column":25},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":4}},{"generated":{"line":29,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":4}},{"generated":{"line":29,"column":11},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":10}},{"name":"ref","generated":{"line":29,"column":30},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":16}},{"generated":{"line":29,"column":33},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":10}},{"name":"TrackOpTypes","generated":{"line":29,"column":35},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":21}},{"name":"GET","generated":{"line":29,"column":60},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":34}},{"generated":{"line":29,"column":63},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":10}},{"generated":{"line":29,"column":65},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":39}},{"generated":{"line":29,"column":72},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":10}},{"generated":{"line":29,"column":73},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":4}},{"generated":{"line":30,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":11,"column":4}},{"generated":{"line":30,"column":3},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":30}},{"generated":{"line":30,"column":5},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":4}},{"generated":{"line":31,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":4}},{"generated":{"line":31,"column":11},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":10}},{"name":"ref","generated":{"line":31,"column":32},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":18}},{"generated":{"line":31,"column":35},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":10}},{"name":"TriggerOpTypes","generated":{"line":31,"column":37},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":23}},{"name":"SET","generated":{"line":31,"column":64},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":38}},{"generated":{"line":31,"column":67},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":10}},{"generated":{"line":31,"column":69},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":43}},{"generated":{"line":31,"column":76},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":10}},{"generated":{"line":31,"column":77},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":3},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":30}},{"generated":{"line":32,"column":4},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"generated":{"line":33,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"name":"get","generated":{"line":33,"column":6},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":10}},{"generated":{"line":33,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"name":"get","generated":{"line":33,"column":21},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":10}},{"generated":{"line":33,"column":24},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"generated":{"line":34,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"name":"set","generated":{"line":34,"column":6},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":15}},{"generated":{"line":34,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"name":"set","generated":{"line":34,"column":21},"source":"../packages/reactivity/src/ref.js","original":{"line":10,"column":15}},{"generated":{"line":34,"column":24},"source":"../packages/reactivity/src/ref.js","original":{"line":9,"column":35}},{"generated":{"line":36,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":2}},{"name":"ref","generated":{"line":36,"column":6},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":8}},{"generated":{"line":36,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":11}},{"name":"RefFlags","generated":{"line":36,"column":46},"source":"../packages/reactivity/src/ref.js","original":{"line":15,"column":5}},{"generated":{"line":36,"column":54},"source":"../packages/reactivity/src/ref.js","original":{"line":15,"column":13}},{"name":"IS_REF","generated":{"line":36,"column":55},"source":"../packages/reactivity/src/ref.js","original":{"line":15,"column":14}},{"generated":{"line":36,"column":61},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":11}},{"generated":{"line":36,"column":63},"source":"../packages/reactivity/src/ref.js","original":{"line":15,"column":23}},{"generated":{"line":36,"column":67},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":11}},{"generated":{"line":36,"column":193},"source":"../packages/reactivity/src/ref.js","original":{"line":16,"column":16}},{"generated":{"line":37,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":17,"column":6}},{"name":"get","generated":{"line":37,"column":11},"source":"../packages/reactivity/src/ref.js","original":{"line":17,"column":13}},{"generated":{"line":37,"column":14},"source":"../packages/reactivity/src/ref.js","original":{"line":17,"column":16}},{"generated":{"line":37,"column":16},"source":"../packages/reactivity/src/ref.js","original":{"line":17,"column":6}},{"generated":{"line":38,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":18,"column":5}},{"generated":{"line":38,"column":3},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":11}},{"name":"v","generated":{"line":38,"column":112},"source":"../packages/reactivity/src/ref.js","original":{"line":19,"column":14}},{"generated":{"line":38,"column":113},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":11}},{"generated":{"line":38,"column":115},"source":"../packages/reactivity/src/ref.js","original":{"line":19,"column":17}},{"name":"set","generated":{"line":39,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":20,"column":6}},{"name":"set","generated":{"line":39,"column":4},"source":"../packages/reactivity/src/ref.js","original":{"line":20,"column":6}},{"generated":{"line":39,"column":7},"source":"../packages/reactivity/src/ref.js","original":{"line":20,"column":9}},{"name":"v","generated":{"line":39,"column":8},"source":"../packages/reactivity/src/ref.js","original":{"line":20,"column":10}},{"generated":{"line":39,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":20,"column":9}},{"generated":{"line":39,"column":10},"source":"../packages/reactivity/src/ref.js","original":{"line":20,"column":6}},{"generated":{"line":40,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":21,"column":5}},{"generated":{"line":40,"column":3},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":11}},{"generated":{"line":40,"column":58},"source":"../packages/reactivity/src/ref.js","original":{"line":14,"column":2}},{"generated":{"line":41,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":23,"column":2}},{"name":"ref","generated":{"line":41,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":23,"column":9}},{"generated":{"line":41,"column":12},"source":"../packages/reactivity/src/ref.js","original":{"line":23,"column":2}},{"generated":{"line":42,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":24,"column":1}},{"generated":{"line":44,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":26,"column":7}},{"name":"ref","generated":{"line":44,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":26,"column":16}},{"generated":{"line":44,"column":12},"source":"../packages/reactivity/src/ref.js","original":{"line":26,"column":7}},{"name":"value","generated":{"line":44,"column":13},"source":"../packages/reactivity/src/ref.js","original":{"line":26,"column":20}},{"generated":{"line":44,"column":18},"source":"../packages/reactivity/src/ref.js","original":{"line":26,"column":7}},{"generated":{"line":44,"column":20},"source":"../packages/reactivity/src/ref.js","original":{"line":26,"column":27}},{"generated":{"line":45,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":2}},{"name":"customRef","generated":{"line":45,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":9}},{"generated":{"line":45,"column":18},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":18}},{"generated":{"line":45,"column":19},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":19}},{"name":"track","generated":{"line":45,"column":29},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":20}},{"generated":{"line":45,"column":34},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":19}},{"name":"trigger","generated":{"line":45,"column":36},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":27}},{"generated":{"line":45,"column":43},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":19}},{"generated":{"line":46,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":19}},{"generated":{"line":46,"column":11},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":40}},{"name":"get","generated":{"line":47,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":28,"column":4}},{"name":"get","generated":{"line":47,"column":6},"source":"../packages/reactivity/src/ref.js","original":{"line":28,"column":4}},{"generated":{"line":47,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":28,"column":7}},{"generated":{"line":47,"column":11},"source":"../packages/reactivity/src/ref.js","original":{"line":28,"column":9}},{"generated":{"line":47,"column":26},"source":"../packages/reactivity/src/ref.js","original":{"line":28,"column":15}},{"name":"track","generated":{"line":48,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":29,"column":6}},{"name":"track","generated":{"line":48,"column":8},"source":"../packages/reactivity/src/ref.js","original":{"line":29,"column":6}},{"generated":{"line":48,"column":13},"source":"../packages/reactivity/src/ref.js","original":{"line":29,"column":11}},{"generated":{"line":49,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":30,"column":6}},{"name":"value","generated":{"line":49,"column":15},"source":"../packages/reactivity/src/ref.js","original":{"line":30,"column":13}},{"generated":{"line":49,"column":20},"source":"../packages/reactivity/src/ref.js","original":{"line":30,"column":6}},{"generated":{"line":50,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":31,"column":5}},{"generated":{"line":50,"column":7},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":40}},{"name":"set","generated":{"line":51,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":32,"column":4}},{"name":"set","generated":{"line":51,"column":6},"source":"../packages/reactivity/src/ref.js","original":{"line":32,"column":4}},{"generated":{"line":51,"column":9},"source":"../packages/reactivity/src/ref.js","original":{"line":32,"column":7}},{"generated":{"line":51,"column":11},"source":"../packages/reactivity/src/ref.js","original":{"line":32,"column":9}},{"name":"newValue","generated":{"line":51,"column":24},"source":"../packages/reactivity/src/ref.js","original":{"line":32,"column":10}},{"generated":{"line":51,"column":32},"source":"../packages/reactivity/src/ref.js","original":{"line":32,"column":9}},{"generated":{"line":51,"column":34},"source":"../packages/reactivity/src/ref.js","original":{"line":32,"column":23}},{"name":"value","generated":{"line":52,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":33,"column":6}},{"name":"value","generated":{"line":52,"column":8},"source":"../packages/reactivity/src/ref.js","original":{"line":33,"column":6}},{"generated":{"line":52,"column":13},"source":"../packages/reactivity/src/ref.js","original":{"line":33,"column":11}},{"name":"newValue","generated":{"line":52,"column":16},"source":"../packages/reactivity/src/ref.js","original":{"line":33,"column":14}},{"generated":{"line":52,"column":24},"source":"../packages/reactivity/src/ref.js","original":{"line":33,"column":6}},{"name":"trigger","generated":{"line":53,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":34,"column":6}},{"name":"trigger","generated":{"line":53,"column":8},"source":"../packages/reactivity/src/ref.js","original":{"line":34,"column":6}},{"generated":{"line":53,"column":15},"source":"../packages/reactivity/src/ref.js","original":{"line":34,"column":13}},{"generated":{"line":54,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":35,"column":5}},{"generated":{"line":55,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":40}},{"generated":{"line":55,"column":5},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":19}},{"generated":{"line":56,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":19}},{"generated":{"line":56,"column":3},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":18}},{"generated":{"line":56,"column":4},"source":"../packages/reactivity/src/ref.js","original":{"line":27,"column":2}},{"generated":{"line":57,"column":0},"source":"../packages/reactivity/src/ref.js","original":{"line":37,"column":1}}],"sources":{"../packages/reactivity/src/ref.js":"import { reactive } from './reactive.js'\nimport { track, trigger } from './effect.js'\nimport { TrackOpTypes, TriggerOpTypes } from './operations.js'\n\nexport const RefFlags = {\n  IS_REF: '__v_isRef',\n}\n\nexport function customRef(factory) {\n  const { get, set } = factory(\n    () => track(ref, TrackOpTypes.GET, 'value'),\n    () => trigger(ref, TriggerOpTypes.SET, 'value'),\n  )\n  const ref = {\n    [RefFlags.IS_REF]: true,\n    get value() {\n      return get()\n    },\n    set value(v) {\n      set(v)\n    },\n  }\n  return ref\n}\n\nexport function ref(value) {\n  return customRef((track, trigger) => ({\n    get: () => {\n      track()\n      return value\n    },\n    set: (newValue) => {\n      value = newValue\n      trigger()\n    },\n  }))\n}\n"},"lineCount":null}},"error":null,"hash":"b178cdcd3a8d93010f442ab7558754d5","cacheData":{"env":{}}}