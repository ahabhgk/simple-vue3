{"version":3,"sources":["../packages/shared/index.js","../packages/reactivity/src/operations.js","../packages/reactivity/src/effect.js","../packages/reactivity/src/baseHandlers.js","../packages/reactivity/src/collectionHandler.js","../packages/reactivity/src/reactive.js","../packages/reactivity/src/ref.js","../packages/reactivity/src/computed.js","../packages/reactivity/index.js","../packages/runtime-core/vnode.js","../packages/runtime-core/component.js","../packages/runtime-core/renderer.js","../packages/runtime-core/api-watch.js","../packages/runtime-core/api-computed.js","../packages/runtime-core/index.js","diff/index.jsx","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["def","obj","key","value","Object","defineProperty","configurable","enumerable","isFunction","isObject","isString","isArray","Array","isText","v","hasOwn","val","prototype","hasOwnProperty","call","hasChanged","oldValue","TrackOpTypes","GET","HAS","ITERATE","TriggerOpTypes","SET","ADD","DELETE","CLEAR","targetMap","WeakMap","activeEffect","effectStack","ITERATE_KEY","Symbol","isEffect","fn","_isEffect","effect","options","raw","createReactiveEffect","lazy","stop","active","cleanup","onStop","reactiveEffect","scheduler","undefined","includes","push","pop","length","deps","forEach","dep","delete","track","target","type","depsMap","get","set","Map","Set","has","add","onTrack","trigger","effects","effectsToAdd","shouldTriggerIteration","run","onTrigger","createGetter","isReadonly","receiver","ReactiveFlags","IS_REACTIVE","IS_READONLY","RAW","readonlyMap","reactiveMap","res","Reflect","readonlyGet","createSetter","deleteProperty","result","ownKeys","mutableHandlers","readonlyHandlers","console","warn","String","rawTarget","rawKey","size","Error","rawValue","hadKey","deleteEntry","clear","callback","thisArg","wrap","createIterableMethod","method","args","rawIterator","next","done","iterator","createInstrumentation","keys","values","entries","createInstrumentationGetter","instrumentations","mutableCollectionHandlers","readonlyCollectionHandlers","TargetType","COMMON","COLLECTION","INVALID","getTargetType","getTypeString","toString","slice","typeString","createReactiveObject","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","observed","Proxy","reactive","readonly","isReactive","toRaw","ob","RefFlags","IS_REF","customRef","factory","ref","newValue","computed","getter","setter","createComputedRef","dirty","computedRef","computeEffect","h","props","children","node","instance","parent","isSameVNodeType","n1","n2","Text","isTextType","currentInstance","getCurrentInstance","setCurrentInstance","recordInstanceBoundEffect","createRenderer","patch","container","isSVG","unmount","processComponent","processElement","processText","process","update","render","setup","prevRenderResult","renderResult","document","createTextNode","nodeValue","appendChild","createElementNS","createElement","patchChildren","patchProps","oldChildren","newChildren","i","newChild","oldChild","j","oldProps","newProps","propName","setProperty","eventType","toLowerCase","listeners","addEventListener","eventProxy","removeEventListener","removeAttribute","setAttribute","e","vnode","doRemove","c","child","parentNode","removeChild","watchEffect","cb","ret","Displayer","App","count","inc","log","querySelector","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","getElementById","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","concat","Function","cached","cache","some"],"mappings":"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","file":"diff.66b157cd.js","sourceRoot":"../demo","sourcesContent":["export const def = (obj, key, value) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    value\n  })\n}\n\nexport const isFunction = (value) => typeof value === 'function'\n\nexport const isObject = (value) =>\n  typeof value === 'object' && value !== null\n\nexport const isString = (value) => typeof value === 'string'\n\nexport const isArray = Array.isArray\n\nexport const isText = (v) => typeof v === 'string' || typeof v === 'number'\n\nexport const hasOwn = (val, key) =>\n  Object.prototype.hasOwnProperty.call(val, key)\n\n// compare whether a value has changed, accounting for NaN.\nexport const hasChanged = (value, oldValue) =>\n  value !== oldValue && (value === value || oldValue === oldValue)\n","export const TrackOpTypes = {\n  GET: 'get',\n  HAS: 'has',\n  ITERATE: 'iterate'\n}\n\nexport const TriggerOpTypes = {\n  SET: 'set',\n  ADD: 'add',\n  DELETE: 'delete',\n  CLEAR: 'clear'\n}\n","import { TriggerOpTypes } from './operations.js'\nimport { isArray } from '../../shared/index.js'\n\nconst targetMap = new WeakMap()\n\nlet activeEffect\nlet effectStack = []\n\nexport const ITERATE_KEY = Symbol('iterate')\n\nexport function isEffect(fn) {\n  return fn && fn._isEffect === true\n}\n\nexport function effect(fn, options = {}) {\n  if (isEffect(fn)) {\n    fn = fn.raw\n  }\n  const effect = createReactiveEffect(fn, options)\n  if (!options.lazy) {\n    effect()\n  }\n  return effect\n}\n\nexport function stop(effect) {\n  if (effect.active) {\n    cleanup(effect)\n    if (effect.options.onStop) effect.options.onStop()\n    effect.active = false\n  }\n}\n\nfunction createReactiveEffect(fn, options) {\n  const effect = function reactiveEffect() {\n    if (!effect.active) return effect.options.scheduler ? undefined : fn()\n    if (!effectStack.includes(effect)) {\n      cleanup(effect)\n      try {\n        effectStack.push(effect)\n        activeEffect = effect\n        return fn()\n      } finally {\n        effectStack.pop()\n        activeEffect = effectStack[effectStack.length - 1]\n      }\n    }\n  }\n  effect._isEffect = true\n  effect.active = true\n  effect.raw = fn\n  effect.deps = []\n  effect.options = options\n  return effect\n}\n\nfunction cleanup(effect) {\n  const { deps } = effect\n  deps.forEach(dep => dep.delete(effect)) // deps 中的 dep 清 effect\n  deps.length = 0 // 清空 effect 的 deps\n}\n\nexport function track(target, type, key) {\n  if (activeEffect == null) return\n\n  let depsMap = targetMap.get(target)\n  if (!depsMap) {\n    targetMap.set(target, (depsMap = new Map()))\n  }\n\n  let dep = depsMap.get(key)\n  if (!dep) {\n    depsMap.set(key, (dep = new Set()))\n  }\n\n  if (!dep.has(activeEffect)) {\n    dep.add(activeEffect)\n    activeEffect.deps.push(dep)\n    if (activeEffect.options.onTrack) {\n      activeEffect.options.onTrack({\n        effect: activeEffect,\n        target,\n        type,\n        key\n      })\n    }\n  }\n}\n\nexport function trigger(target, type, key) {\n  const depsMap = targetMap.get(target)\n  if (!depsMap) return\n  // 需要新建一个 set，如果直接 const effect = depsMap.get(key)\n  // effect 函数执行时 track 的依赖就也会在这一轮 trigger 执行，导致无限循环\n  const effects = new Set()\n  const add = (effectsToAdd) => {\n    if (effectsToAdd) {\n      effectsToAdd.forEach(effect => {\n        // 不要添加自己当前的 effect，否则之后 run（mutate）的时候\n        // 遇到 effect(() => foo.value++) 会导致无限循环\n        if (effect !== activeEffect) effects.add(effect)\n      })\n    }\n  }\n  if (type === TriggerOpTypes.CLEAR) {\n    // collection being cleared\n    // trigger all effects for target\n    depsMap.forEach(add)\n  } else {\n    // SET | ADD | DELETE\n    if (key !== undefined) {\n      add(depsMap.get(key))\n    }\n    const shouldTriggerIteration =\n      (type === TriggerOpTypes.ADD) ||\n      (type === TriggerOpTypes.DELETE) ||\n      (type === TriggerOpTypes.SET && target instanceof Map)\n    // iteration key on ADD | DELETE | Map.SET\n    if (shouldTriggerIteration) {\n      add(depsMap.get(isArray(target) ? 'length' : ITERATE_KEY))\n    }\n  }\n\n  const run = (effect) => {\n    if (effect.options.onTrigger) {\n      effect.options.onTrigger({\n        effect,\n        target,\n        key,\n      })\n    }\n    if (effect.options.scheduler) {\n      effect.options.scheduler(effect)\n    } else {\n      effect()\n    }\n  }\n  effects.forEach(run)\n}\n","import { ReactiveFlags, readonly, reactive, readonlyMap, reactiveMap } from './reactive.js'\nimport { TrackOpTypes, TriggerOpTypes } from './operations.js'\nimport { track, trigger, ITERATE_KEY } from './effect.js'\nimport { hasOwn, hasChanged, isObject } from '../../shared/index.js'\n\nfunction createGetter(isReadonly = false) {\n  return function get(target, key, receiver) {\n    if (key === ReactiveFlags.IS_REACTIVE) return !isReadonly\n    if (key === ReactiveFlags.IS_READONLY) return isReadonly\n    if (\n      key === ReactiveFlags.RAW &&\n      receiver === (isReadonly ? readonlyMap : reactiveMap).get(target)\n    ) {\n      return target\n    }\n\n    const res = Reflect.get(target, key, receiver)\n    if (!isReadonly) track(target, TrackOpTypes.GET, key)\n    if (isObject(res)) {\n      return isReadonly ? readonly(res) : reactive(res)\n    }\n    return res\n  }\n}\n\nconst get = createGetter()\nconst readonlyGet = createGetter(true)\n\nfunction createSetter() {\n  return function set(target, key, value, receiver) {\n    const oldValue = target[key]\n    const res = Reflect.set(target, key, value, receiver)\n    if (target === receiver[ReactiveFlags.RAW] && hasChanged(value, oldValue)) {\n      trigger(target, TriggerOpTypes.SET, key)\n    }\n    return res\n  }\n}\n\nconst set = createSetter()\n\n// delete proxy.key\nfunction deleteProperty(target, key) {\n  const result = Reflect.deleteProperty(target, key)\n  if (result && hasOwn(target, key)) trigger(target, TriggerOpTypes.DELETE, key)\n  return result\n}\n\n// 'key' in proxy\nfunction has(target, key) {\n  track(target, TrackOpTypes.HAS, key)\n  return Reflect.has(target, key)\n}\n\n// Object.getOwnPropertyNames(proxy)、Object.getOwnPropertySymbols(proxy)、\n// Object.keys(proxy)、for...in\n// 例如：effect(() => console.log(Object.keys(proxy))) 需要在 proxy 新增或删除元素时触发\nfunction ownKeys(target) {\n  track(target, TrackOpTypes.ITERATE, ITERATE_KEY)\n  return Reflect.ownKeys(target)\n}\n\nexport const mutableHandlers = {\n  get,\n  set,\n  deleteProperty,\n  has,\n  ownKeys,\n}\n\nexport const readonlyHandlers = {\n  get: readonlyGet,\n  set(target, key) {\n    console.warn(\n      `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n      target\n    )\n    return true\n  },\n  deleteProperty(target, key) {\n    console.warn(\n      `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n      target\n    )\n    return true\n  },\n}\n","import { ReactiveFlags, toRaw, readonly, reactive } from './reactive.js'\nimport { hasOwn, isObject } from '../../shared/index.js'\nimport { track, trigger, ITERATE_KEY } from './effect.js'\nimport { TrackOpTypes, TriggerOpTypes } from './operations.js'\n\n// const getProto = (v) => Reflect.getPrototypeOf(v)\n\n// Set, WeakSet, Map, WeakMap\nconst get = (target, key, isReadonly) => {\n  const rawTarget = toRaw(target)\n  const rawKey = toRaw(key)\n  !isReadonly && track(rawTarget, TrackOpTypes.GET, rawKey)\n  const res = rawTarget.get(rawKey)\n  if (isObject(res)) {\n    return isReadonly ? readonly(res) : reactive(res)\n  }\n  return res\n}\n\n// Set, WeakSet, Map, WeakMap\nconst size = (target, isReadonly) => {\n  const rawTarget = toRaw(target)\n  !isReadonly && track(rawTarget, TrackOpTypes.ITERATE, ITERATE_KEY)\n  return Reflect.get(rawTarget, 'size', rawTarget)\n}\n\n// Set, WeakSet, Map, WeakMap\nconst has = (target, key, isReadonly) => {\n  const rawTarget = toRaw(target)\n  const rawKey = toRaw(key)\n  !isReadonly && track(rawTarget, TrackOpTypes.HAS, rawKey)\n  return rawTarget.has(rawKey)\n}\n\n// Set, WeakSet\nconst add = (target, value, isReadonly) => {\n  if (isReadonly) throw new Error(`operation ADD failed: target is readonly.`)\n  const rawValue = toRaw(value)\n  const rawTarget = toRaw(target)\n  const hadKey = rawTarget.has(rawValue)\n  const res = rawTarget.add(rawValue)\n  if (!hadKey) { // 要先执行 add 后再 trigger，保证 effect 中的函数能执行出正确的结果\n    trigger(target, TriggerOpTypes.ADD, value)\n  }\n  return res\n}\n\n// Map, WeakMap\nconst set = (target, key, value, isReadonly) => {\n  if (isReadonly) throw new Error(`operation SET failed: target is readonly.`)\n  const rawTarget = toRaw(target)\n  const rawKey = toRaw(key)\n  const rawValue = toRaw(value)\n  const hadKey = rawTarget.has(rawKey)\n  const res = rawTarget.set(rawKey, rawValue)\n  if (hadKey) {\n    trigger(rawTarget, TriggerOpTypes.ADD, rawKey)\n  } else {\n    trigger(rawTarget, TriggerOpTypes.SET, rawKey)\n  }\n  return res\n}\n\n// Set, WeakSet, Map, WeakMap\nconst deleteEntry = (target, key, isReadonly) => {\n  if (isReadonly) throw new Error(`operation DELETE failed: target is readonly.`)\n  const rawTarget = toRaw(target)\n  const rawKey = toRaw(key)\n  const hadKey = rawTarget.has(rawKey)\n  const res = rawTarget.delete(rawKey)\n  if (hadKey) {\n    trigger(rawTarget, TriggerOpTypes.DELETE, rawKey)\n  }\n  return res\n}\n\n// Set, WeakSet, Map, WeakMap\nconst clear = (target, isReadonly) => {\n  if (isReadonly) throw new Error(`operation CLEAR failed: target is readonly.`)\n  const rawTarget = toRaw(target)\n  const hadKey = rawTarget.size !== 0\n  const res = rawTarget.clear()\n  if (hadKey) {\n    trigger(rawTarget, TriggerOpTypes.CLEAR, undefined)\n  }\n  return res\n}\n\n// Set, WeakSet, Map, WeakMap\nconst forEach = (target, callback, thisArg, isReadonly) => {\n  const rawTarget = toRaw(target)\n  !isReadonly && track(rawTarget, TrackOpTypes.ITERATE, ITERATE_KEY)\n  const wrap = (value) => {\n    if (isObject(value)) return isReadonly ? readonly(value) : reactive(value)\n    return value\n  }\n  return rawTarget.forEach((value, key) => {\n    return callback.call(thisArg, wrap(value), wrap(key), target)\n  })\n}\n\nconst createIterableMethod = (method, isReadonly) => {\n  return (target, ...args) => {\n    const rawTarget = toRaw(target)\n    const rawIterator = rawTarget[method](...args)\n    const wrap = (value) => {\n      if (isObject(value)) return isReadonly ? readonly(value) : reactive(value)\n      return value\n    }\n    !isReadonly && track(rawTarget, TrackOpTypes.ITERATE, ITERATE_KEY)\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = rawIterator.next()\n        return done\n          ? { value, done }\n          : {\n            value: method === 'entries' ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n            done,\n          }\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this // 返回拦截的 Iterator：rawIterator -> proxyIterator(this)\n      },\n    }\n  }\n}\n\nconst createInstrumentation = (isReadonly) => ({\n  get(key) {\n    return get(this, key, isReadonly) // 通过 Reflect 调用时 this 是 receiver（proxy 实例）\n  },\n  get size() {\n    return size(this, isReadonly)\n  },\n  has(key) {\n    return has(this, key, isReadonly)\n  },\n  add(value) {\n    return add(this, value, isReadonly)\n  },\n  set(key, value) {\n    return set(this, key, value, isReadonly)\n  },\n  delete(key) {\n    return deleteEntry(this, key, isReadonly)\n  },\n  clear() {\n    return clear(this, isReadonly)\n  },\n  forEach(callback, thisArg) {\n    return forEach(this, callback, thisArg, isReadonly)\n  },\n  keys(...args) {\n    return createIterableMethod('keys', isReadonly)(this, ...args)\n  },\n  values(...args) {\n    return createIterableMethod('values', isReadonly)(this, ...args)\n  },\n  entries(...args) {\n    return createIterableMethod('values', isReadonly)(this, ...args)\n  },\n  [Symbol.iterator](...args) {\n    return createIterableMethod(Symbol.iterator, isReadonly)(this, ...args)\n  },\n})\n\nfunction createInstrumentationGetter(isReadonly) {\n  const instrumentations = createInstrumentation(isReadonly)\n  \n  return (target, key, receiver) => {\n    if (key === ReactiveFlags.IS_REACTIVE) return !isReadonly\n    if (key === ReactiveFlags.IS_READONLY) return isReadonly\n    if (key === ReactiveFlags.RAW) return target\n\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target\n        ? instrumentations\n        : target,\n      key,\n      receiver,\n    )\n  }\n}\n\nexport const mutableCollectionHandlers = {\n  get: createInstrumentationGetter(false),\n}\n\nexport const readonlyCollectionHandlers = {\n  get: createInstrumentationGetter(true),\n}\n","import { isObject } from '../../shared/index.js'\nimport { mutableHandlers, readonlyHandlers } from './baseHandlers.js'\nimport { mutableCollectionHandlers, readonlyCollectionHandlers } from './collectionHandler.js'\n\nexport const ReactiveFlags = {\n  IS_REACTIVE: '__v_isReactive',\n  IS_READONLY: '__v_isReadonly',\n  RAW: '__v_raw',\n}\n\nconst TargetType = {\n  COMMON: 'COMMON',\n  COLLECTION: 'COLLECTION',\n  INVALID: 'INVALID',\n}\n\nexport const reactiveMap = new WeakMap()\nexport const readonlyMap = new WeakMap()\n\nconst getTargetType = (target) => {\n  const getTypeString = (target) => {\n    return Object.prototype.toString.call(target).slice(8, -1)\n  }\n  const typeString = getTypeString(target)\n  switch (typeString) {\n    case 'Object':\n    case 'Array':\n      return TargetType.COMMON\n    case 'Map':\n    case 'Set':\n    case 'WeakMap':\n    case 'WeakSet':\n      return TargetType.COLLECTION\n    default:\n      return TargetType.INVALID\n  }\n}\n\nfunction createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers) {\n  if (!isObject(target)) {\n    throw new Error(`value cannot be made reactive: ${String(target)}`)\n  }\n  // target is already a Proxy, return it.\n  // exception: calling readonly() on a reactive object\n  if (\n    target[ReactiveFlags.RAW] &&\n    !(isReadonly && target[ReactiveFlags.IS_REACTIVE])\n  ) {\n    return target\n  }\n  // 已经有了对应的 proxy\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap\n  const existingProxy = proxyMap.get(target)\n  if (existingProxy) {\n    return existingProxy\n  }\n  // 获取 typeString 判断是不是 collectionType\n  const targetType = getTargetType(target)\n  if (targetType === TargetType.INVALID) {\n    return target\n  }\n\n  const observed = new Proxy(\n    target,\n    targetType === TargetType.COLLECTION ? collectionHandlers : baseHandlers\n  )\n  proxyMap.set(target, observed)\n  return observed\n}\n\nexport function reactive(target) {\n  return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers)\n}\n\nexport function readonly(target) {\n  return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers)\n}\n\nexport function isReactive(target) {\n  return !!(target && target[ReactiveFlags.IS_REACTIVE])\n}\n\nexport function isReadonly(target) {\n  return !!(target && target[ReactiveFlags.IS_READONLY])\n}\n\nexport function toRaw(ob) {\n  return (ob && toRaw(ob[ReactiveFlags.RAW])) || ob\n}\n","import { reactive } from './reactive.js'\nimport { track, trigger } from './effect.js'\nimport { TrackOpTypes, TriggerOpTypes } from './operations.js'\n\nexport const RefFlags = {\n  IS_REF: '__v_isRef',\n}\n\nexport function customRef(factory) {\n  const { get, set } = factory(\n    () => track(ref, TrackOpTypes.GET, 'value'),\n    () => trigger(ref, TriggerOpTypes.SET, 'value'),\n  )\n  const ref = {\n    [RefFlags.IS_REF]: true,\n    get value() {\n      return get()\n    },\n    set value(v) {\n      set(v)\n    },\n  }\n  return ref\n}\n\nexport function ref(value) {\n  return customRef((track, trigger) => ({\n    get: () => {\n      track()\n      return value\n    },\n    set: (newValue) => {\n      value = newValue\n      trigger()\n    },\n  }))\n}\n","import { isFunction } from '../../shared/index.js'\nimport { effect, trigger } from './effect.js'\nimport { customRef } from './ref.js'\n\nexport function computed(options) {\n  let getter\n  let setter\n  if (isFunction(options)) {\n    getter = options\n    setter = () => {}\n  } else {\n    getter = options.get\n    setter = options.set\n  }\n\n  return createComputedRef(getter, setter)\n}\n\nfunction createComputedRef(getter, setter) {\n  let dirty = true\n  let value\n  const computedRef = customRef((track, trigger) => {\n    const computeEffect = effect(getter, {\n      lazy: true,\n      scheduler() {\n        if (!dirty) {\n          dirty = true\n          trigger()\n        }\n      },\n    })\n    computedRef.effect = computeEffect // runtime-core 组件拿 effect 用\n    return {\n      get: () => {\n        if (dirty) {\n          value = computeEffect()\n          dirty = false\n        }\n        track()\n        return value\n      },\n      set: (newValue) => {\n        setter(newValue)\n      },\n    }\n  })\n  return computedRef\n}\n","export { reactive, readonly, isReactive, isReadonly } from './src/reactive.js'\nexport { effect, isEffect, stop } from './src/effect.js'\nexport { ref, customRef } from './src/ref.js'\nexport { computed } from './src/computed.js'\n","export function h(type, props, ...children) {\n  props = props ?? {}\n\n  const key = props.key ?? null\n  delete props.key\n\n  if (children.length === 1) {\n    props.children = children[0]\n  } else if (children.length > 1) {\n    props.children = children\n  }\n\n  return {\n    type, // function, setup, string, Text (internal)\n    props, // only for user (props.children)\n    key,\n    node: null, // hostNode\n    instance: null, // setupComponent: component instance, functionalComponent: hooks\n    parent: null,\n    children: null, // VNode[], for internal vnode structure\n  }\n}\n\nexport const isSameVNodeType = (n1, n2) => n1.type === n2.type && n1.key === n2.key\n","export const Text = Symbol('Text')\nexport const isTextType = (v) => v === Text\n\nlet currentInstance\nexport const getCurrentInstance = () => currentInstance\nexport const setCurrentInstance = (instance) => currentInstance = instance\n\nexport const recordInstanceBoundEffect = (effect) => {\n  if (currentInstance) currentInstance.effects.push(effect)\n}\n","import { isObject, isString, isArray, isText } from '../shared'\nimport { Text, isTextType } from './component'\nimport { isSameVNodeType, h } from './vnode'\nimport { reactive, effect, stop } from '../reactivity'\nimport { setCurrentInstance } from './component'\n\nexport function createRenderer(options) {\n  const patch = (n1, n2, container, isSVG) => {\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      unmount(n1)\n      n1 = null\n    }\n\n    const { type } = n2\n    if (isObject(type)) {\n      processComponent(n1, n2, container, isSVG)\n    } else if (isString(type)) {\n      processElement(n1, n2, container, isSVG)\n    } else if (isTextType(type)) {\n      processText(n1, n2, container)\n    } else {\n      type.process(/* ... */)\n    }\n  }\n\n  const processComponent = (n1, n2, container, isSVG) => {\n    if (n1 == null) {\n      const instance = n2.instance = {\n        props: reactive(n2.props), // initProps\n        update: null,\n        effects: [],\n      }\n\n      setCurrentInstance(instance)\n      const render = n2.type.setup(instance.props)\n      setCurrentInstance(null)\n\n      let prevRenderResult = null\n      instance.update = effect(() => {\n        const renderResult = render()\n        n2.children = [renderResult]\n        renderResult.parent = n2\n        patch(prevRenderResult, renderResult, container, isSVG)\n        prevRenderResult = renderResult\n      })\n    } else {\n      const instance = n2.instance = n1.instance\n      // updateProps, 根据 vnode.props 修改 instance.props\n      Object.keys(n2.props).forEach(key => {\n        const newValue = n2.props[key]\n        const oldValue = instance.props[key]\n        if (newValue !== oldValue) {\n          instance.props[key] = newValue\n        }\n      })\n    }\n  }\n\n  const processText = (n1, n2, container) => {\n    if (n1 == null) {\n      const node = n2.node = document.createTextNode(n2.props.nodeValue)\n      container.appendChild(node)\n    } else {\n      const node = n2.node = n1.node\n      node.nodeValue = n2.props.nodeValue\n    }\n  }\n\n  const processElement = (n1, n2, container, isSVG) => {\n    if (n1 == null) {\n      const node = n2.node = isSVG\n        ? document.createElementNS('http://www.w3.org/2000/svg', n2.type)\n        : document.createElement(n2.type)\n      patchChildren(null, n2, node, isSVG)\n      patchProps(null, n2.props, node, isSVG)\n      container.appendChild(node)\n    } else {\n      const node = n2.node = n1.node\n      patchChildren(n1, n2, node, isSVG)\n      patchProps(n1.props, n2.props, node, isSVG)\n    }\n  }\n\n  const patchChildren = (n1, n2, container, isSVG = false) => {\n    const oldChildren = n1 ? n1.children : []\n    let newChildren = n2.props.children\n    newChildren = isArray(newChildren) ? newChildren : [newChildren]\n    n2.children = []\n  \n    for (let i = 0; i < newChildren.length; i++) {\n      if (newChildren[i] == null) continue\n      let newChild = newChildren[i]\n      newChild = isText(newChild) ? h(Text, { nodeValue: newChild }) : newChild\n      n2.children[i] = newChild\n      newChild.parent = n2\n  \n      let oldChild = null\n      for (let j = 0; j < oldChildren.length; j++) {\n        if (oldChildren[j] == null) continue\n        if (isSameVNodeType(oldChildren[j], newChild)) {\n          oldChild = oldChildren[j]\n          oldChildren[j] = null\n          break\n        }\n      }\n      patch(oldChild, newChild, container, isSVG)\n      if (newChild.node) container.appendChild(newChild.node)\n    }\n  \n    for (let oldChild of oldChildren) {\n      if (oldChild != null) unmount(oldChild)\n    }\n  }\n\n  const patchProps = (oldProps, newProps, node, isSVG) => {\n    oldProps = oldProps ?? {}\n    newProps = newProps ?? {}\n    // remove old props\n    Object.keys(oldProps).forEach((propName) => {\n      if (propName !== 'children' && propName !== 'key' && !(propName in newProps)) {\n        setProperty(node, propName, null, oldProps[propName], isSVG);\n      }\n    });\n    // update old props\n    Object.keys(newProps).forEach((propName) => {\n      if (propName !== 'children' && propName !== 'key' && oldProps[propName] !== newProps[propName]) {\n        setProperty(node, propName, newProps[propName], oldProps[propName], isSVG);\n      }\n    });\n  }\n\n  const setProperty = (node, propName, newValue, oldValue, isSVG) => {\n    if (propName[0] === 'o' && propName[1] === 'n') {\n      const eventType = propName.toLowerCase().slice(2);\n  \n      if (!node.listeners) node.listeners = {};\n      node.listeners[eventType] = newValue;\n  \n      if (newValue) {\n        if (!oldValue) {\n          node.addEventListener(eventType, eventProxy);\n        }\n      } else {\n        node.removeEventListener(eventType, eventProxy);\n      }\n    } else if (newValue !== oldValue) {\n      if (propName in node && !isSVG) {\n        node[propName] = newValue == null ? '' : newValue\n      } else if (newValue == null || newValue === false) {\n        node.removeAttribute(propName)\n      } else {\n        node.setAttribute(propName, newValue)\n      }\n    }\n  }\n\n  function eventProxy(e) {\n    // this: node\n    this.listeners[e.type](e)\n  }\n\n  const unmount = (vnode, doRemove = true) => {\n    const { type } = vnode\n    if (isObject(type)) {\n      const { instance } = vnode\n      instance.effects.forEach(stop)\n      stop(instance.update)\n      vnode.children.forEach(c => unmount(c, doRemove))\n    } else if (isString(type)) {\n      vnode.children.forEach(c => unmount(c, false))\n      const child = vnode.node\n      const parent = child.parentNode\n      if (parent && doRemove) parent.removeChild(child)\n    } else if (isTextType(type)) {\n      const child = vnode.node\n      const parent = child.parentNode\n      if (parent && doRemove) parent.removeChild(child)\n    } else {\n      type.unmount(/** */)\n    }\n  }\n\n  return {\n    render(vnode, container) {\n      if (vnode == null) {\n        if (container.vnode) {\n          unmount(container.vnode)\n        }\n      } else {\n        patch(container.vnode ?? null, vnode, container)\n      }\n      container.vnode = vnode\n    },\n  }\n}\n","import { effect, stop } from '../reactivity'\nimport { recordInstanceBoundEffect } from './component'\n\nexport const watchEffect = (cb) => {\n  const e = effect(cb)\n  recordInstanceBoundEffect(e)\n  return () => stop(e)\n}\n","import { effect, stop, computed as _computed } from '../reactivity'\nimport { recordInstanceBoundEffect } from './component'\n\nexport const computed = (options) => {\n  const ret = _computed(options)\n  recordInstanceBoundEffect(ret.effect)\n  return ret\n}\n","export { h } from './vnode'\nexport { createRenderer } from './renderer'\nexport { watchEffect } from './api-watch'\nexport { computed } from './api-computed'\n","/** @jsx h */\nimport { ref } from '../../packages/reactivity'\nimport { h, createRenderer, watchEffect, computed } from '../../packages/runtime-core'\n\nconst Displayer = {\n  setup(props) {\n    return () => (\n      <div>{props.children}</div>\n    )\n  }\n}\n\nconst App = {\n  setup(props) {\n    const count = ref(0)\n    const inc = () => count.value++\n\n    watchEffect(() => console.log(count.value))\n\n    return () => (\n      <div>\n        {count.value % 2 ? <Displayer>{count.value}</Displayer> : null}\n        <button onClick={inc}> + </button>\n      </div>\n    )\n  }\n}\n\ncreateRenderer().render(<App />, document.querySelector('#root'))\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}